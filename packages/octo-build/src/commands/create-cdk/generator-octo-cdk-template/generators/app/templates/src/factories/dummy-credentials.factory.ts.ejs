import { Factory } from '@quadnix/octo';

/**
 * This is a dummy credentials class to demonstrate how to create a custom factory and use it across your CDK.
 */
export class DummyCredentials {
  readonly username = 'dummy';
  readonly password = 'dummy';
}

/**
 * This is a factory exposing a singleton instance of the `DummyCredentials` class.
 * It uses the `@Factory` decorator to register with the Octo container.
 * It defines some unique metadata which uniquely identifies the factory category.
 * Calling the factory using the container will always execute the `create` method,
 * and return an instance of the `DummyCredentials` class.
 */
@Factory<DummyCredentials>(DummyCredentials, { metadata: { package: '@<%= name %>' } })
export class DummyCredentialsFactory {
  private static instance: DummyCredentials;

  static async create(): Promise<DummyCredentials> {
    if (!this.instance) {
      this.instance = new DummyCredentials();
    }
    return this.instance;
  }
}
