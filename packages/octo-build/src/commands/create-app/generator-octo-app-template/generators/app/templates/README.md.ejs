# <%= name %>
<%= description %>

## Octo Documentation
[Official Docs](http://octo.quadnix.com/)

## Installation
```bash
npm install
```

## Fix me
Before running the app, ensure,
- `env` values are appropriately set in `octo.yaml`.

## Running the Definition file
The `octo.yaml` is your Octo definition file.
It contains all the modules you want to run,
which will create your infrastructure resources as per the module's instructions.

To run the definition file,
```bash
# First create a lock.
node_modules/.bin/octo state lock -d octo.yaml

# Then copy the lock output, a random unique string, and run the app with the lock ID.
OCTO_APP_LOCK_ID=<lock_id> node_modules/.bin/octo run -d octo.yaml

# Lastly, unlock the app.
node_modules/.bin/octo state unlock <lock_id> -d octo.yaml
```

## Development
The rest of the setup is a TypeScript project for you to get started with developing new modules in Octo quickly.
You can follow the official documentation to learn more.
Once you have your custom constructs and modules defined, you can use below commands to build those modules.
Don't forget to add your new modules to your Octo definition file.

```bash
npm run build
```

## Destroy
Once you have your infrastructure created, and you wish all of them destroyed,
its as simple as commenting out the necessary modules and re-running the app.

### Step 1
In `octo.yaml`, comment out all modules except the `app` and `account` modules.
The app and account modules load AWS credentials to call AWS APIs, hence they remain uncommented.

By commenting the `s3-website-service-module` module below,
you are safely deleting the s3-website resources created by this module.

```yaml
modules:
  - moduleId: app-module
    moduleClass: SimpleAppModule
    moduleInputs:
      name: aws-s3-website

  - moduleId: account-module
    moduleClass: AwsIniAccountModule
    moduleInputs:
      accountId: "${env.AWS_ACCOUNT_ID}"
      app: "${{app-module.model.app}}"

  #- moduleId: s3-website-service-module
  #  moduleClass: AwsS3StaticWebsiteServiceModule
  #  moduleInputs:
  #    account: "${{account-module.model.account}}"
  #    awsRegionId: us-east-1
  #    bucketName: "${env.AWS_S3_WEBSITE_BUCKET_NAME}"
  #    directoryPath: website
```

### Step 2
Then, simply re-build (if necessary) and run your app again.
